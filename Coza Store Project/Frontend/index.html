<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sHoPsCloTh</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      /* Side Menu Styles */
      .side-menu {
        position: fixed;
        top: 0;
        left: -300px; /* Hide menu off-screen by default */
        width: 250px;
        height: 100%;
        background-color: #2c3e50;
        color: white;
        transition: left 0.3s ease;
        z-index: 1001;
      }

      .side-menu ul {
        list-style: none;
        padding: 0;
        margin: 60px 0 0 0;
      }

      .side-menu ul li {
        padding: 15px 20px;
        border-bottom: 1px solid #34495e;
      }

      .side-menu ul li a {
        color: white;
        text-decoration: none;
        font-size: 16px;
      }

      .side-menu ul li a:hover {
        color: #1abc9c;
      }

      /* Close Button */
      .close-menu {
        position: absolute;
        top: 10px;
        right: 10px;
        background: none;
        border: none;
        color: white;
        font-size: 24px;
        cursor: pointer;
      }

      .close-menu:hover {
        color: #e74c3c;
      }

      /* Overlay */
      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: none;
        z-index: 1000;
      }

      /* Show Menu and Overlay */
      .side-menu.active {
        left: 0;
      }

      .overlay.active {
        display: block;
      }
    </style>
  </head>
  <body>
   <!-- Side Popup Menu -->
<div id="side-menu" class="side-menu">
  <button id="close-menu" class="close-menu">Ã—</button>
  <ul>
    <li><a href="#">My Profile</a></li>
    <li><a href="#" id="Dashboard">Dashboard</a></li>
    <li><a href="#">Payments</a></li>
    <li><a href="#">Add Payment Method</a></li>
    <li><button id="logout">Logout</button></li> <!-- Changed to button -->
  </ul>
</div>

    <!-- Overlay for background dimming -->
    <div id="overlay" class="overlay"></div>

    <header class="navbar">
      <div class="logo"><a href="#">sHoPsCloTh</a></div>
      <nav>
        <ul class="nav-links">
          <li><a href="#best-selling">Home</a></li>
          <li><a href="#product-grid">Shop</a></li>
          <li><a href="#designer-section">Features</a></li>
          <li><a href="#about">About</a></li>
        </ul>
        <div class="nav-actions">
          <a href="#"><img src="svg/cart.svg" alt="Cart" /></a>
          <a href="./ApiIntegration/Login.html" id="login-button"><button class="btn-login">Login</button></a>
          <button id="profile-button" class="btn-profile" style="display: none;">Profile</button>
        </div>
      </nav>
    </header>

    <section class="hero">
      <div class="hero-content">
        <h1>Discover and Find Your Own Fashion!</h1>
        <p>
          Explore our curated collection of stylish clothing and accessories
          tailored to your unique taste.
        </p>
        <a href="#best-selling" class="btn">EXPLORE NOW</a>
      </div>
      <div class="hero-image">
        <img
          src="https://c.animaapp.com/mUZKBhGU/img/mask-group.png"
          alt="Fashion Image"
        />
      </div>
    </section>

    <!-- Best Selling Section -->
    <section class="best-selling" id="best-selling">
      <h2>Best Selling</h2>
      <p>
        Get in on the trend with our curated selection of best-selling styles.
      </p>

      <div class="products-container" id="bestSellingProducts"></div>
      <a href="./html/allProducts.html"
        ><button class="see-all-btn">See all <span>&rarr;</span></button></a
      >
    </section>

    <!-- Product Grid Section -->
    <section class="product-grid" id="product-grid">
      <h2>Our Products</h2>
      <p>
        Get in on the trend with our superb collection of wonderful products of
        all nieche.
      </p>
      <br />
      <div class="product-list" id="product-list"></div>
      <a href="./html/allProducts.html"
        ><button class="see-all-btn">See all <span>&rarr;</span></button></a
      >
    </section>

    <!-- Designers section -->
    <section class="designer-section" id="designer-section">
      <h2>Designer Clothes For You</h2>
      <p class="subtitle">
        Immerse yourself in the world of luxury fashion with our meticulously
        crafted designer clothes!
      </p>

      <div class="fashion-container" id="designerProducts">
        <div class="fashion-item">
          <img src="./Images/accessories.jpg" alt="Accessories" />
          <h3>Accessories</h3>
          <p>
            Complete your ensemble with designer accessories such as handbags,
            scarves, belts, and hats.
          </p>
        </div>
        <div class="fashion-item">
          <img src="./Images/dresses.jpg" alt="Dresses" />
          <h3>Dresses</h3>
          <p>
            Explore a stunning range of designer dresses, including evening
            gowns and chic day dresses.
          </p>
        </div>
        <div class="fashion-item">
          <img src="./Images/outerwear.jpg" alt="Outerwear" />
          <h3>Outerwear</h3>
          <p>
            Browse luxurious designer coats, jackets, and blazers to stay
            stylishly warm during colder seasons.
          </p>
        </div>
      </div>
    </section>

    <!-- Feedback section -->
    <section class="feedback-section">
      <div class="feedback-container">
        <h2>Feedback Corner</h2>

        <div class="feedback-grid">
          <div class="feedback-card">
            <div class="avatar">ST</div>
            <h3>Sarah Thompson</h3>
            <p>
              "The customer experience was exceptional. The quality and style of
              the clothes were beyond expectations."
            </p>
          </div>

          <div class="feedback-card">
            <div class="avatar">EJ</div>
            <h3>Emily Johnson</h3>
            <p>
              "My shopping experience was delightful! The website was
              user-friendly, and the product descriptions were detailed."
            </p>
          </div>

          <div class="feedback-card">
            <div class="avatar">MB</div>
            <h3>Michael Brown</h3>
            <p>
              "The selection of clothes is fantastic, and the prices are
              reasonable. Will definitely shop here again!"
            </p>
          </div>
        </div>

        <div class="submit-feedback">
          <button onclick="location.href='#'">Submit Your Feedback</button>
        </div>
      </div>
    </section>

    <footer class="footer" id="about">
      <div class="footer-container">
        <!-- Brand & Social Media -->
        <div class="footer-brand">
          <h2>sHoPsCloTh</h2>
          <p>Social Media</p>
          <div class="social-icons">
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
          </div>
        </div>

        <!-- Shop Links -->
        <div class="footer-links">
          <h3>SHOP</h3>
          <ul>
            <li><a href="#">Products</a></li>
            <li><a href="#">Overview</a></li>
            <li><a href="#">Pricing</a></li>
            <li><a href="#">Releases</a></li>
          </ul>
        </div>

        <!-- Company Links -->
        <div class="footer-links">
          <h3>COMPANY</h3>
          <ul>
            <li><a href="#">About Us</a></li>
            <li><a href="#">Contact</a></li>
            <li><a href="#">News</a></li>
            <li><a href="#">Support</a></li>
          </ul>
        </div>

        <!-- Newsletter -->
        <div class="footer-newsletter">
          <h3>STAY UP TO DATE</h3>
          <form id="newsletter-form">
            <input
              type="email"
              id="email"
              placeholder="Enter your email"
              required
            />
            <button type="submit">SUBMIT</button>
          </form>
        </div>
      </div>

      <div class="footer-bottom">
        <p>
          <a href="#">Terms</a> | <a href="#">Privacy</a> |
          <a href="#">Cookies</a>
        </p>
      </div>
    </footer>

    <script src="./ApiIntegration/productIntegration.js"></script>
    <script src="./ApiIntegration/newsLetter.js"></script>
    
    <script>
      // Side Menu Functionality
      const sideMenu = document.getElementById("side-menu");
      const closeMenuButton = document.getElementById("close-menu");
      const overlay = document.getElementById("overlay");
      const profileButton = document.getElementById("profile-button");

      // Function to open the side menu
      function openMenu() {
        sideMenu.classList.add("active");
        overlay.classList.add("active");
      }

      // Function to close the side menu
      function closeMenu() {
        sideMenu.classList.remove("active");
        overlay.classList.remove("active");
      }

      // Open the side menu when the profile button is clicked
      profileButton.addEventListener("click", openMenu);

      // Close the side menu when the close button is clicked
      closeMenuButton.addEventListener("click", closeMenu);

      // Close the side menu when clicking outside
      overlay.addEventListener("click", closeMenu);

      // Update the navigation bar based on the user's login status
      document.addEventListener("DOMContentLoaded", function () {
        const isLoggedIn = localStorage.getItem("accessToken");

        if (isLoggedIn) {
          // Hide Login Button and Show Profile Button
          document.getElementById("login-button").style.display = "none";
          profileButton.style.display = "block";
        }
        //Adding admin privilages
        const isAdmin = localStorage.getItem("isAdmin");
        if (isAdmin === "true") {
          const dashboard = document.getElementById("Dashboard");
          dashboard.addEventListener("click", () => {
            window.location.href = "./ApiIntegration/adminPannel.html";
          });
          document.getElementById("logout").addEventListener("click", async () => {
  try {
    const token = localStorage.getItem("accessToken");
    if (!token) throw new Error("No access token found. Please login.");

    const response = await fetch(
      "http://localhost:3000/api/v1/users/logout",
      {
        method: "POST",
        headers: {
          Authorization: `Bearer ${token}`,
        },
      }
    );

    if (!response.ok) {
      const errorData = await response.json();
      throw new Error(
        errorData.message || `HTTP error! Status: ${response.status}`
      );
    }

    console.log("Logout successful");
    localStorage.removeItem("accessToken");
    localStorage.removeItem("isAdmin");
    window.location.href = "./ApiIntegration/login.html";
  } catch (error) {
    console.error("Logout error:", error);
    console.log("Logout failed: " + error.message);
  }
});          
        }

      });

      

      // Smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute("href"));
          if (target) {
            target.scrollIntoView({ behavior: "smooth" });
          }
        });
      });
    </script>
  </body>
</html>